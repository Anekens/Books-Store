{"version":3,"sources":["components/BookCard.jsx","redux/reducers/cart.js","components/BookCardContainer.js","components/Filter.jsx","redux/reducers/filter.js","components/FilterContainer.js","components/Menu.jsx","components/MenuContainer.js","components/App.jsx","redux/reducers/books.js","components/AppContainer.js","redux/store.js","index.js"],"names":["BookCard","book","Card","className","Image","src","image","Content","Header","title","Meta","author","extra","Icon","name","price","Button","onClick","addToCart","bind","addedCount","ADD_TO_CART","REMOVE_FROM_CART","initialState","items","obj","type","payload","removeFromCart","id","connect","cart","reduce","count","Filter","setFilter","filterBy","searchQuery","setSearchQuery","Menu","secondary","Item","active","Input","icon","onChange","e","target","value","placeholder","SET_QUERY","SET_FILTER","filter","CartComponent","List","selection","divided","verticalAlign","floated","color","avatar","MenuComponent","totalPrice","position","Popup","trigger","content","map","on","hideOnScroll","total","length","uniqBy","o","App","setBooks","this","props","axios","get","then","data","books","isReady","Container","Group","itemsPerRow","i","key","Component","SET_BOOKS","SET_IS_READY","searchBooks","orderBy","sortBy","toLowerCase","indexOf","filterBooks","reducers","combineReducers","state","action","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","logger","_store_","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c66d6a93.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Card, Image, Icon, Button } from 'semantic-ui-react';\r\n\r\nconst BookCard = (book) => {\r\n   return (\r\n    <Card>\r\n      <div className=\"card-image\">\r\n        <Image src={book.image} />\r\n      </div>\r\n      <Card.Content>\r\n        <Card.Header>{book.title}</Card.Header>\r\n        <Card.Meta>\r\n          <span className=\"date\">{book.author}</span>\r\n        </Card.Meta>\r\n      </Card.Content>\r\n      <Card.Content extra>\r\n        <a>\r\n          <Icon name=\"rub\" />\r\n          {book.price}\r\n        </a>\r\n      </Card.Content>\r\n      <Button onClick={book.addToCart.bind(this, book)}>\r\n        Добавить в корзину {book.addedCount > 0 && `(${book.addedCount})`}\r\n      </Button>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default BookCard;\r\n","const ADD_TO_CART = 'BooksStore/redux/reducers/ADD-TO-CART';\r\nconst REMOVE_FROM_CART = 'BooksStore/redux/reducers/REMOVE-FROM-CART';\r\n\r\n\r\nconst initialState = {\r\n  items: []\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      return {\r\n        ...state,\r\n        items: [...state.items, action.payload]\r\n      };\r\n    case REMOVE_FROM_CART:\r\n      return {\r\n        ...state,\r\n        items: state.items.filter(o => o.id !== action.payload)\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const addToCart = obj => ({\r\n  type: ADD_TO_CART,\r\n  payload: obj,\r\n});\r\n\r\nexport const removeFromCart = id => ({\r\n  type: REMOVE_FROM_CART,\r\n  payload: id,\r\n});\r\n\r\n","import {connect} from 'react-redux';\r\nimport BookCard from './BookCard';\r\nimport {addToCart} from \"../redux/reducers/cart\";\r\nimport {removeFromCart} from \"../redux/reducers/cart\";\r\n\r\nconst mapStateToProps = ({cart}, {id}) => ({\r\n    addedCount: cart.items.reduce((count, book) => count + (book.id === id ? 1 : 0), 0),\r\n});\r\n\r\nexport default connect(mapStateToProps, {addToCart, removeFromCart})(BookCard);\r\n","import React from 'react';\r\nimport { Input, Menu } from 'semantic-ui-react';\r\n\r\nconst Filter = ({ setFilter, filterBy, searchQuery, setSearchQuery }) => (\r\n  <Menu secondary>\r\n    <Menu.Item\r\n      active={filterBy === 'all'}\r\n      onClick={setFilter.bind(this, 'all')}>\r\n      Все\r\n    </Menu.Item>\r\n    <Menu.Item\r\n      active={filterBy === 'price_high'}\r\n      onClick={setFilter.bind(this, 'price_high')}>\r\n      Цена (дорогие)\r\n    </Menu.Item>\r\n    <Menu.Item\r\n      active={filterBy === 'price_low'}\r\n      onClick={setFilter.bind(this, 'price_low')}>\r\n      Цена (дешевые)\r\n    </Menu.Item>\r\n    <Menu.Item\r\n      active={filterBy === 'author'}\r\n      onClick={setFilter.bind(this, 'author')}>\r\n      Автор\r\n    </Menu.Item>\r\n    <Menu.Item>\r\n      <Input\r\n        icon=\"search\"\r\n        onChange={e => setSearchQuery(e.target.value)}\r\n        value={searchQuery}\r\n        placeholder=\"Введите запрос...\"\r\n      />\r\n    </Menu.Item>\r\n  </Menu>\r\n);\r\n\r\nexport default Filter;\r\n","const SET_QUERY = 'BooksStore/redux/reducers/SET-QUERY';\r\nconst SET_FILTER = 'BooksStore/redux/reducers/SET-FILTER';\r\n\r\nconst initialState = {\r\n  searchQuery: '',\r\n  filterBy: 'all',\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_QUERY:\r\n      return {\r\n        ...state,\r\n        searchQuery: action.payload,\r\n      };\r\n    case SET_FILTER:\r\n      return {\r\n        ...state,\r\n        filterBy: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const setFilter = filter => ({\r\n  type: SET_FILTER,\r\n  payload: filter,\r\n});\r\n\r\nexport const setSearchQuery = value => ({\r\n  type: SET_QUERY,\r\n  payload: value,\r\n});\r\n\r\n","import {connect} from 'react-redux';\r\nimport Filter from './Filter';\r\nimport {setFilter, setSearchQuery} from \"../redux/reducers/filter\";\r\n\r\nconst mapStateToProps = ({filter}) => ({\r\n    filterBy: filter.filterBy,\r\n});\r\n\r\nexport default connect(mapStateToProps, {setFilter, setSearchQuery},)(Filter);\r\n","import React from \"react\";\r\nimport { Menu, Popup, List, Button, Image } from \"semantic-ui-react\";\r\n\r\nconst CartComponent = ({ title, id, image, removeFromCart }) => (\r\n  <List selection divided verticalAlign=\"middle\">\r\n    <List.Item>\r\n      <List.Content floated=\"right\">\r\n        <Button onClick={removeFromCart.bind(this, id)} color=\"red\">\r\n          Удалить\r\n        </Button>\r\n      </List.Content>\r\n      <Image avatar src={image} />\r\n      <List.Content>{title}</List.Content>\r\n    </List.Item>\r\n  </List>\r\n);\r\n\r\nconst MenuComponent = ({ totalPrice, count, items }) => (\r\n  <Menu>\r\n    <Menu.Item name=\"browse\">Магазин книг</Menu.Item>\r\n\r\n    <Menu.Menu position=\"right\">\r\n      <Menu.Item name=\"signup\">\r\n        Итого: &nbsp; <b>{totalPrice}</b>&nbsp;руб.\r\n      </Menu.Item>\r\n\r\n      <Popup\r\n        trigger={\r\n          <Menu.Item name=\"help\">\r\n            Корзина (<b>{count}</b>)\r\n          </Menu.Item>\r\n        }\r\n        content={items.map(book => (\r\n          <CartComponent {...book} />\r\n        ))}\r\n        on=\"click\"\r\n        hideOnScroll\r\n      />\r\n    </Menu.Menu>\r\n  </Menu>\r\n);\r\n\r\nexport default MenuComponent;\r\n","import {connect} from 'react-redux';\r\nimport Menu from './Menu';\r\nimport uniqBy from 'lodash/uniqBy';\r\nimport {addToCart} from \"../redux/reducers/cart\";\r\nimport {removeFromCart} from \"../redux/reducers/cart\";\r\n\r\nconst mapStateToProps = ({cart}) => ({\r\n    totalPrice: cart.items.reduce((total, book) => total + book.price, 0),\r\n    count: cart.items.length,\r\n    items: uniqBy(cart.items, o => o.id),\r\n});\r\n\r\nexport default connect(mapStateToProps, {addToCart, removeFromCart})(Menu);\r\n","import React, { Component } from 'react';\r\nimport { Card, Container } from 'semantic-ui-react';\r\nimport axios from 'axios';\r\nimport BookCard from './BookCardContainer';\r\nimport Filter from './FilterContainer';\r\nimport Menu from './MenuContainer';\r\n\r\nclass App extends Component {\r\n  componentWillMount() {\r\n    const { setBooks } = this.props;\r\n    axios.get('/books.json').then(({ data }) => {\r\n      setBooks(data);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { books, isReady } = this.props;\r\n    return (\r\n      <Container>\r\n        <Menu/>\r\n        <Filter/>\r\n        <Card.Group itemsPerRow={4}>\r\n          {!isReady\r\n            ? 'Загрузка...'\r\n            : books.map((book, i) => <BookCard key={i} {...book} />)}\r\n        </Card.Group>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","const SET_BOOKS = 'BooksStore/redux/reducers/SET-BOOKS';\r\nconst SET_IS_READY = 'BooksStore/redux/reducers/SET-IS-READY';\r\n\r\n\r\nconst initialState = {\r\n  isReady: false,\r\n  items: null\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_BOOKS:\r\n      return {\r\n        ...state,\r\n        items: action.payload,\r\n        isReady: true\r\n      };\r\n    case SET_IS_READY:\r\n      return {\r\n        ...state,\r\n        isReady: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport const setBooks = books => ({\r\n  type: SET_BOOKS,\r\n  payload: books\r\n});\r\n","import {connect} from 'react-redux';\r\nimport App from './App';\r\nimport orderBy from 'lodash/orderBy';\r\nimport {setBooks} from \"../redux/reducers/books\";\r\n\r\nconst sortBy = (books, filterBy) => {\r\n    switch (filterBy) {\r\n        case 'price_high':\r\n            return orderBy(books, 'price', 'desc');\r\n        case 'price_low':\r\n            return orderBy(books, 'price', 'asc');\r\n        case 'author':\r\n            return orderBy(books, 'author', 'asc');\r\n        default:\r\n            return books;\r\n    }\r\n};\r\n\r\nconst filterBooks = (books, searchQuery) =>\r\n    books.filter(obj =>\r\n        obj.title.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0\r\n        || obj.author.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0);\r\n\r\nconst searchBooks = (books, filterBy, searchQuery) => {\r\n    return sortBy(filterBooks(books, searchQuery), filterBy);\r\n};\r\n\r\nconst mapStateToProps = ({books, filter}) => ({\r\n    books: books.items && searchBooks(books.items, filter.filterBy, filter.searchQuery),\r\n    isReady: books.isReady,\r\n});\r\n\r\nexport default connect(mapStateToProps, {setBooks})(App);\r\n","import {createStore, applyMiddleware, compose} from 'redux';\r\nimport logger from 'redux-logger';\r\nimport { combineReducers } from 'redux';\r\nimport booksReducer from '../redux/reducers/books';\r\nimport cartReducer from '../redux/reducers/cart';\r\nimport filterReducer from '../redux/reducers/filter';\r\n\r\nlet reducers = combineReducers({\r\n  books:booksReducer,\r\n  cart:cartReducer,\r\n  filter:filterReducer,\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(logger)\r\n));\r\n\r\nwindow._store_ = store;\r\nexport default store\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport './app.css';\r\nimport App from './components/AppContainer';\r\nimport store from \"./redux/store\";\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App/>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}